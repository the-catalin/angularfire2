{"version":3,"file":"angularfire2.js","sourceRoot":"","sources":["../src/angularfire2.ts"],"names":[],"mappings":"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","sourcesContent":["import * as firebase from 'firebase';\r\nimport * as utils from './utils';\r\nimport { FirebaseAppConfig } from './interfaces';\r\nimport { AuthConfiguration } from './auth';\r\nimport {\r\n  FirebaseListFactoryOpts,\r\n  FirebaseObjectFactoryOpts,\r\n} from './interfaces';\r\nimport {\r\n  FirebaseConfig,\r\n  FirebaseApp,\r\n  WindowLocation,\r\n  FirebaseUserConfig,\r\n  FirebaseAuthConfig,\r\n  FirebaseAppName\r\n} from './tokens';\r\nimport {\r\n  APP_INITIALIZER,\r\n  Inject,\r\n  Injectable,\r\n  OpaqueToken,\r\n  NgModule,\r\n  ModuleWithProviders\r\n} from '@angular/core';\r\nimport {\r\n  FirebaseSdkAuthBackend,\r\n  AngularFireAuth,\r\n  firebaseAuthConfig,\r\n  AuthBackend,\r\n  AuthMethods,\r\n  AuthProviders,\r\n  FirebaseAuthState\r\n} from './auth/index';\r\nimport {\r\n  FirebaseListObservable,\r\n  FirebaseObjectObservable,\r\n  FirebaseListFactory,\r\n  FirebaseObjectFactory,\r\n  AngularFireDatabase\r\n} from './database/index';\r\n\r\n\r\nexport class AngularFire {\r\n  constructor(\r\n     private firebaseConfig:FirebaseAppConfig,\r\n    public auth: AngularFireAuth,\r\n    public database: AngularFireDatabase) {}\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: ({type: any, decorators?: DecoratorInvocation[]}|null)[] = [\n{type: undefined, decorators: [{ type: Inject, args: [FirebaseConfig, ] }, ]},\n{type: AngularFireAuth, },\n{type: AngularFireDatabase, },\n];\n}\r\n\r\nexport function _getFirebase(config: FirebaseAppConfig, appName?: string): firebase.app.App {\r\n  try {\r\n    if (appName) {\r\n      return firebase.initializeApp(config, appName);\r\n    } else {\r\n      return firebase.initializeApp(config);\r\n    }\r\n  }\r\n  catch (e) {\r\n    return firebase.app(null);\r\n  }\r\n}\r\n\r\nexport function _getWindowLocation(){\r\n  return window.location;\r\n}\r\n\r\nexport function _getAuthBackend(app: firebase.app.App): FirebaseSdkAuthBackend {\r\n  return new FirebaseSdkAuthBackend(app);\r\n}\r\n\r\nexport function _getDefaultFirebase(config){\r\n  // remove a trailing slash from the Database URL if it exists\r\n  config.databaseURL = utils.stripTrailingSlash(config.databaseURL);\r\n  return config;\r\n}\r\n\r\nexport const COMMON_PROVIDERS: any[] = [\r\n  {\r\n    provide: FirebaseApp,\r\n    useFactory: _getFirebase,\r\n    deps: [FirebaseConfig, FirebaseAppName]\r\n  },\r\n  AngularFireAuth,\r\n  AngularFire,\r\n  AngularFireDatabase\r\n];\r\n\r\nexport const FIREBASE_PROVIDERS:any[] = [\r\n  COMMON_PROVIDERS,\r\n  {\r\n    provide: AuthBackend,\r\n    useFactory: _getAuthBackend,\r\n    deps: [FirebaseApp]\r\n  },\r\n  {\r\n    provide: WindowLocation,\r\n    useFactory: _getWindowLocation\r\n  },\r\n];\r\n\r\n/**\r\n * Used to define the default Firebase root location to be\r\n * used throughout an application.\r\n */\r\nexport const defaultFirebase = (config: FirebaseAppConfig): any => {\r\n  return [\r\n    { provide: FirebaseUserConfig, useValue: config },\r\n    { provide: FirebaseConfig, useFactory: _getDefaultFirebase, deps: [FirebaseUserConfig] }\r\n  ]\r\n};\r\n\r\n\r\nexport class AngularFireModule {\r\n  static initializeApp(config: FirebaseAppConfig, authConfig?: AuthConfiguration, appName?: string): ModuleWithProviders {\r\n    return {\r\n      ngModule: AngularFireModule,\r\n      providers: [\r\n        { provide: FirebaseUserConfig, useValue: config },\r\n        { provide: FirebaseConfig, useFactory: _getDefaultFirebase, deps: [FirebaseUserConfig] },\r\n        { provide: FirebaseAuthConfig, useValue: authConfig },\r\n        { provide: FirebaseAppName, useValue: appName }\r\n      ]\r\n    }\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\r\n  providers: FIREBASE_PROVIDERS\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: ({type: any, decorators?: DecoratorInvocation[]}|null)[] = [\n];\n}\r\n\r\nexport {\r\n  AngularFireAuth,\r\n  AngularFireDatabase,\r\n  FirebaseListObservable,\r\n  FirebaseObjectObservable,\r\n  FirebaseListFactory,\r\n  FirebaseObjectFactory,\r\n  firebaseAuthConfig,\r\n  FirebaseAuthState,\r\n  AuthMethods,\r\n  AuthProviders,\r\n  WindowLocation\r\n}\r\n\r\nexport { FirebaseConfig, FirebaseApp, FirebaseAuthConfig, FirebaseRef, FirebaseUrl, FirebaseUserConfig } from './tokens';\r\nexport { FirebaseAppConfig } from './interfaces';\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}